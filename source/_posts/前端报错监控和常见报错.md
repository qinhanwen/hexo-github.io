---
title: å‰ç«¯æŠ¥é”™ç›‘æ§å’Œå¸¸è§æŠ¥é”™
date: 2018-11-20 09:41:09
tags: 
- ä¼˜åŒ–
categories: 
- ä¼˜åŒ–
---

> å‚è€ƒèµ„æ–™ï¼šhttp://web.jobbole.com/93684/
>
> â€‹		   [äº†è§£æºç ï¼Œå…ˆè´´åœ°å€æœ‰ç©ºæ¥å†™](https://blog.csdn.net/qq_42536375/article/details/80798714)



#### 1.å¼‚å¸¸

##### 1ï¼‰å¸¸è§é”™è¯¯ç±»å‹

1. **RangeError**ï¼Œä¸€æ˜¯æ•°ç»„é•¿åº¦ä¸ºè´Ÿæ•°ï¼ŒäºŒæ˜¯Numberå¯¹è±¡çš„æ–¹æ³•å‚æ•°è¶…å‡ºèŒƒå›´ï¼Œä»¥åŠå‡½æ•°å †æ ˆè¶…è¿‡æœ€å¤§å€¼
2. **ReferenceError**ï¼Œå½“å¼•ç”¨æœªå£°æ˜çš„å˜é‡æ—¶å‘ç”Ÿ
3. **SyntaxError**ï¼Œè§£ææ—¶å‘ç”Ÿè¯­æ³•é”™è¯¯
4. **TypeError**ï¼Œå½“å€¼ä¸æ˜¯æ‰€æœŸå¾…çš„ç±»å‹æ—¶ï¼Œ`null.f()`ä¹ŸæŠ¥è¿™ä¸ªé”™
5. **URIError**ï¼Œå½“ä¼ é€’ä¸€ä¸ªéæ³•çš„URIç»™å…¨å±€URIå¤„ç†å‡½æ•°æ—¶å‘ç”Ÿï¼Œå¦‚`decodeURIComponent('%')`ï¼Œå³`decodeURIComponent`ï¼Œ`decodeURI`,`encodeURIComponent`ï¼Œ`encodeURI`



ä¸¾å‡ ä¸ªğŸŒ°,å¹¶æ²¡æœ‰æŒ‰å¾ªåºä¸¾ğŸŒ°ã€‚(éƒ¨åˆ†æƒ…å†µ)

1.TypeError

![TypeError](http://www.qinhanwen.xyz/WX20181204-130322@2x.png)

2.ReferenceError

![](http://www.qinhanwen.xyz/WX20181204-130550@2x.png)



3.URIError

![](http://www.qinhanwen.xyz/WX20181204-130755@2x.png)



4.SyntaxError(è¿™é‡Œå› ä¸ºå¤§å†™çš„ç¬¦å·)

![](http://www.qinhanwen.xyz/WX20181204-130911@2x.png)



5.RangeError

![](http://www.qinhanwen.xyz/WX20181204-131506@2x.png)





##### 2ï¼‰å¼‚å¸¸å‡ºç°çš„ç‰¹ç‚¹

å¼‚å¸¸çš„å‡ºç°ä¸ä¼šç›´æ¥å¯¼è‡´ JS å¼•æ“å´©æºƒï¼Œæœ€å¤šåªä¼šä½¿å½“å‰æ‰§è¡Œçš„ä»»åŠ¡ç»ˆæ­¢ã€‚

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

</body>
<script>
    throw new Error('æŠ¥é”™');
    console.log('æŠ¥é”™æ‹‰');
</script>
<script>
    console.log('åŠ è½½')
</script>

</html>
```

1. å½“å‰ä»£ç å—å°†ä½œä¸ºä¸€ä¸ªä»»åŠ¡å‹å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼ŒJS çº¿ç¨‹ä¼šä¸æ–­åœ°ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­æå–ä»»åŠ¡æ‰§è¡Œã€‚

2. å½“ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸ï¼Œä¸”å¼‚å¸¸æ²¡æœ‰æ•è·å¤„ç†ï¼Œåˆ™ä¼šä¸€ç›´æ²¿ç€è°ƒç”¨æ ˆä¸€å±‚å±‚å‘å¤–æŠ›å‡ºï¼Œæœ€ç»ˆç»ˆæ­¢å½“å‰ä»»åŠ¡çš„æ‰§è¡Œã€‚

3. JS çº¿ç¨‹ä¼šç»§ç»­ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­æå–ä¸‹ä¸€ä¸ªä»»åŠ¡ç»§ç»­æ‰§è¡Œã€‚


å¯ä»¥çœ‹åˆ°ï¼Œç¬¬ä¸€ä¸ª`script`æ ‡ç­¾ä¸‹æ²¡æœ‰æ‰“å°å‡ºæ¥

![](http://www.qinhanwen.xyz/WX20181203-233206@2x.png)





#### 2.ä¸‰ç§ç›‘å¬æŠ¥é”™çš„æ–¹å¼

è„šæœ¬é”™è¯¯ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼šè¯­æ³•é”™è¯¯ï¼Œè¿è¡Œæ—¶é”™è¯¯ã€‚

##### 1ï¼‰try ... catch...

###### å³æ—¶è¿è¡Œé”™è¯¯ä¸€èˆ¬ä½¿ç”¨try ... catch...

```javascript
try{
    var name = "223";
	console.log(Name);
}catch(err){
	console.log(err);
}
// ReferenceError: Name is not defined
//è¿˜æœ‰ä¸€èˆ¬åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„æ—¶å€™éƒ½éœ€è¦ä½¿ç”¨try ... catch...ã€‚
```



###### try ... catch...å‡ ç§æ— æ³•æ•è·çš„æƒ…å†µ

â€‹	ä¸€èˆ¬è¯­æ³•é”™è¯¯ï¼Œå°±è¢«ç¼–è¯‘å™¨å‘ç°äº†

```javascript
try {
  var error = 'error'ï¼›   // å¤§å†™åˆ†å·ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼
} catch(e) {
  console.log('æˆ‘æ„ŸçŸ¥ä¸åˆ°é”™è¯¯');
  console.log(e);
}
```

â€‹	å¼‚æ­¥é”™è¯¯

```javascript
try {
  setTimeout(() => {
    error        // å¼‚æ­¥é”™è¯¯
  })
} catch(e) {
  console.log('æˆ‘æ„ŸçŸ¥ä¸åˆ°é”™è¯¯');
  console.log(e);
}
```



##### 2ï¼‰window.onerror = function(msg, url, line, col, error){}

â€‹	å®ƒæœ‰5ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼š

```javascript
 * @param {String} errorMessage  é”™è¯¯ä¿¡æ¯ 
 * @param {String} scriptURI   å‡ºé”™çš„æ–‡ä»¶ 
 * @param {Long}  lineNumber   å‡ºé”™ä»£ç çš„è¡Œå· 
 * @param {Long}  columnNumber  å‡ºé”™ä»£ç çš„åˆ—å· 
 * @param {Object} errorObj    é”™è¯¯çš„è¯¦ç»†ä¿¡æ¯ï¼ŒAnything
```

â€‹	å®ƒå¯ä»¥ç›‘å¬å¼‚æ­¥æŠ¥é”™

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

</body>
<script>
window.onerror = function(msg, url, line, col, error){
    console.log(msg);
    console.log(url);
    console.log(line);
    console.log(col);
    console.log(error);
}
</script>
<script>
    setTimeout(function(){
        error
    },0)
</script>


</html>
```

â€‹	å¯ä»¥çœ‹åˆ°

![](http://www.qinhanwen.xyz/WX20181203-235223@2x.png)





###### å½“ç„¶å®ƒä¹Ÿæœ‰å®ƒçš„é—®é¢˜

â€‹	å¦‚æœæˆ‘ç›‘å¬çš„äº‹ä»¶ï¼Œå†™åœ¨åŒæ­¥äº‹ä»¶æŠ¥é”™ä¹‹åï¼Œå°±æ— æ³•è¢«ç›‘å¬åˆ°

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

</body>
<script>
   error
</script>
<script>
window.onerror = function(msg, url, line, col, error){
    console.log(msg);
    console.log(url);
    console.log(line);
    console.log(col);
    console.log(error);
}
</script>
</html>
```

å¯ä»¥çœ‹åˆ°

![](http://www.qinhanwen.xyz/WX20181203-235613@2x.png)





â€‹	å›¾ç‰‡404è¯·æ±‚çš„æ—¶å€™	

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<script>
    window.onerror = function (msg, url, line, col, error) {
        console.log(msg);
        console.log(url);
        console.log(line);
        console.log(col);
        console.log(error);
    }
</script>

<body>
    <img src="test.png" />
</body>

</html>
```

â€‹	å¯ä»¥çœ‹åˆ°

![](http://www.qinhanwen.xyz/WX20181203-235905@2x.png)



##### 3ï¼‰window.addEventListener('error',function(err){})

æ•ˆæœä¸ä¸Šé¢ä¸€ä¸ªç›¸åŒï¼Œä¸è¿‡ä¸Šé¢é‚£ä¸ªæ¯”è¾ƒå¥½ç”¨ã€‚



#### 3.é”™è¯¯ä¸Šä¼ 

å†™ä¸ªç®€å•çš„ğŸŒ°ï¼ˆçœç•¥äº†å¾ˆå¤šåˆ¤æ–­ï¼‰

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<script>
    function postError({ msg, url, line, col, error }) {
        var xml = new XMLHttpRequest();
        xml.onreadystatechange = function () {
            if (xml.readyState == 4) {
                if (xml.status == 200) {
                    console.log(xml.response);
                }
            }
        }
        xml.open('POST', 'http://localhost:8001/error', true);
        xml.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        xml.send(`msg=${msg}, url=${url}, line=${line}, col=${col}, error=${error} `);
    }
</script>

<script>
    window.onerror = function (msg, url, line, col, error) {
        postError({ msg, url, line, col, error });
    }
</script>
<script src="http://localhost:8001/error.js" type="text/javascript" crossOrigin></script>

<body>
</body>

</html>
```



Koa:

```javascript
const Koa = require('koa');
const app = new Koa();

const path = require('path');
const cors = require('koa-cors');
const Router = require('koa-router');
const router = new Router();
const koaBody = require('koa-body');

router.post('/error', async (ctx, next) => {
  const body = ctx.request.body;
  console.log(body);
  ctx.body = {
      success: true
  };
})
app.use(cors());
app.use(require('koa-static')(path.resolve(__dirname, './public')));
app.use(koaBody());
app.use(router.routes());
app.listen(8001, () => {
  console.log('koa app listening at 8001')
});
```



å¯ä»¥çœ‹åˆ°è¯·æ±‚

![](http://www.qinhanwen.xyz/WX20181204-221037@2x.png)



è¿˜å¯ä»¥çœ‹åˆ°åå°æ‰“å°å‡ºçš„ç»“æœ

![](http://www.qinhanwen.xyz/WX20181204-221222@2x.png)





#### 4.è¡¥å……ä¸€ä¸‹é‡åˆ°è¿‡çš„é—®é¢˜

##### 1ï¼‰localStorageå­˜æ»¡äº†çš„æŠ¥é”™

å…¬å¸appåœ¨ç™»é™†é¡µçš„æ—¶å€™ç™½å±ï¼Œæœ€åçŒœæµ‹å¯èƒ½æ˜¯localStorageå­˜æ»¡äº†ï¼Œå¯¼è‡´æŠ¥é”™ã€‚

å†™ä¸ªä¸€ç›´å¾€ç¼“å­˜é‡Œå­˜æ•°æ®ï¼Œè‡´ä½¿æŠ¥é”™çš„ğŸŒ°ã€‚

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

</body>
<script>
    window.onerror = function(msg,url,col,line,e){
     console.log(msg,url,col,line,e);
    }
</script>
<script>
    setInterval(function(){ localStorage.setItem((new         Date()).getTime(),'ssssssssssssssssssssssssssss') }, 0);//è¿™ä¸ªå­—ç¬¦ä¸²è¦å­˜å¾ˆä¹…æ‰ä¼šçœ‹åˆ°æŠ¥é”™ã€‚ã€‚
</script>
</html>
```

åœ¨æµè§ˆå™¨ä¸Šè°ƒè¯•ä¼šæŠ“åˆ°æŠ¥é”™

![](http://www.qinhanwen.xyz/5FDE0C5CA450E9B5F91FE54B589565EB.png)



ç„¶é¹…æˆ‘ä»¬çš„é”™è¯¯ä¸Šä¼ å´æ²¡æœ‰è¿™ä¸ªé”™è¯¯ã€‚æœ€åæˆ‘å°è¯•ç€ä½¿ç”¨`window.addEventListener('error',function(err){})`æŠ“å–è¿™ä¸ªæŠ¥é”™ï¼Œåˆ¤æ–­codeä¸º22ï¼Œå¹¶ä¸”nameä¸ºQuotaExceededErrorçš„æ—¶å€™ï¼ŒæŠŠç¼“å­˜é‡Œå¿…é¡»çš„æ•°æ®ä¿å­˜ä¸‹æ¥ï¼Œåˆ é™¤å…¶ä»–æ— ç”¨çš„ç¼“å­˜ã€‚åœ¨æµè§ˆå™¨è°ƒè¯•æ­£å¸¸ï¼Œåœ¨çœŸæœºè°ƒè¯•çš„æ—¶å€™ç¡®æŠ“ä¸åˆ°è¿™ä¸ªæŠ¥é”™ã€‚



##### 2ï¼‰script error

ç»å¸¸å¼•å…¥å¤–éƒ¨çš„è„šæœ¬æŠ¥é”™ï¼Œç¡®çœ‹ä¸åˆ°å…·ä½“çš„æŠ¥é”™ä¿¡æ¯ã€‚



å†™ä¸ªç®€å•çš„ğŸŒ°ï¼Œé¡µé¢`error.html`å¯åœ¨8000ç«¯å£ï¼Œåç«¯ä½¿ç”¨[koa](https://qinhanwen.github.io/2018/11/16/koa%E5%85%A5%E9%97%A8/),å¯åœ¨8001ç«¯å£ï¼Œ`error.html`åŠ è½½8001ç«¯å£çš„è„šæœ¬ã€‚[å…³äºè·¨åŸŸ](https://qinhanwen.github.io/2018/11/27/%E8%B7%A8%E5%9F%9F%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/)



error.html

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<script>
    window.onerror = function (msg, url, line, col, error) {
        console.log(msg);
        console.log(url);
        console.log(line);
        console.log(col);
        console.log(error);
    }
</script>
<script src="http://localhost:8001/error.js" type="text/javascript" ></script>
<body>
</body>

</html>
```



Index.js

```javascript
const Koa = require('koa');
const path = require('path');
const cors = require('koa-cors');
const app = new Koa();
 
app.use(cors());
app.use(require('koa-static')(path.resolve(__dirname, './public')));
 
app.listen(8001, () => {
  console.log('koa app listening at 8001')
});
```



error.js

```javascript
var a = 2;
console.log(A);//å¤§å†™çš„a
```

äºæ˜¯å¯ä»¥çœ‹åˆ°æŠ¥é”™ä¿¡æ¯

![](http://www.qinhanwen.xyz/WX20181204-100616@2x.png)



`script error`ï¼š æ˜¯æµè§ˆå™¨åœ¨åŒæºç­–ç•¥é™åˆ¶ä¸‹äº§ç”Ÿçš„ï¼Œæµè§ˆå™¨å¤„äºå¯¹å®‰å…¨æ€§ä¸Šçš„è€ƒè™‘ï¼Œå½“é¡µé¢å¼•ç”¨éåŒåŸŸåå¤–éƒ¨è„šæœ¬æ–‡ä»¶æ—¶ä¸­æŠ›å‡ºå¼‚å¸¸çš„è¯ï¼Œæ­¤æ—¶æœ¬é¡µé¢æ˜¯æ²¡æœ‰æƒåˆ©çŸ¥é“è¿™ä¸ªæŠ¥é”™ä¿¡æ¯çš„ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯è¾“å‡º `script error`è¿™æ ·çš„ä¿¡æ¯ã€‚



**è§£å†³æ–¹æ¡ˆ**ï¼š`script`æ ‡ç­¾å†…æ·»åŠ `crossOrigin`

error.html

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<script>
    window.onerror = function (msg, url, line, col, error) {
        console.log(msg);
        console.log(url);
        console.log(line);
        console.log(col);
        console.log(error);
    }
</script>
 <!--æ–°å¢crossOrigin-->
<script src="http://localhost:8001/error.js" type="text/javascript" crossOrigin></script>

<body>
</body>

</html>
```



äºæ˜¯å¯ä»¥çœ‹åˆ°å…·ä½“çš„æŠ¥é”™ä¿¡æ¯

![](http://www.qinhanwen.xyz/WX20181204-102544@2x.png)