---
title: åŸå‹å’ŒåŸå‹é“¾
date: 2018-12-06 00:03:52
tags: 
- JavaScript
categories: 
- JavaScript
---

# åŸå‹å’ŒåŸå‹é“¾

>  https://juejin.im/post/5835853f570c35005e413b19
>
>  https://juejin.im/post/5c218e4c5188254caf18bb1a



#### å¼•ç”¨ç±»å‹éƒ½æ˜¯å¯¹è±¡



#### åŸå‹ä¸åŸå‹é“¾

å¯¹è±¡éƒ½æœ‰åŸå‹ï¼ŒåŸå‹ä¹Ÿæ˜¯å¯¹è±¡ï¼Œä¹Ÿæœ‰è‡ªå·±çš„åŸå‹ï¼Œå°±ç»„æˆäº†ä¸€æ¡åŸå‹é“¾ã€‚åœ¨å¯¹è±¡ä¸Šæ‰¾æŸä¸ªå±æ€§æ²¡æ‰¾åˆ°å°±ä¼šå¾€åŸå‹é“¾ä¸Šæ‰¾ã€‚



ç¬¬ä¸€ä¸ªğŸŒ°

```javascript
var obj = {};
console.log(obj.__proto__ == Object.prototype);//true

var string = "string";
console.log(string.__proto__ == String.prototype);//true

var boolean = true;
console.log(boolean.__proto__ == Boolean.prototype);//true

var arr = [];
console.log(arr.__proto__ == Array.prototype);//true

var num = 1;
console.log(num.__proto__ == Number.prototype);//true
```

Objectã€Stringã€Booleanã€Arrayã€Numberæ˜¯æ„é€ å‡½æ•°ï¼Œè€Œå£°æ˜çš„å˜é‡æ˜¯å®ƒä»¬çš„å®ä¾‹ã€‚



ç¬¬äºŒä¸ªğŸŒ°

```javascript
function test(name){
    this.name = name;
}
test.prototype.print = function(){
    console.log(this.name);
}
let test1 = new test('qinhanwen');
test1.print();//qinhanwen
console.log(test1.__proto__ === test.prototype);//true
console.log(test1.__proto__.constructor === test);//true
```

[newçš„è¿‡ç¨‹](https://qinhanwen.github.io/2018/12/04/new%E7%9A%84%E6%97%B6%E5%80%99%E5%88%B0%E5%BA%95%E5%81%9A%E4%BA%86%E4%BB%80%E4%B9%88/)ï¼Œä»è¿™é‡Œå¯ä»¥çœ‹å‡ºtest1å¯¹è±¡å®ä¾‹çš„\_\_proto\_\_æŒ‡å‘testçš„prototypeã€‚constructoræŒ‡å‘æ„é€ å‡½æ•°ã€‚



ç¬¬ä¸‰ä¸ªğŸŒ°

```javascript
function test(name){
    this.name = name;
}
test.prototype.print = function(){
    console.log(this.name);
}
let test1 = new test('qinhanwen');
console.log(test1.__proto__);//ä¹Ÿå°±æ˜¯test.prototype
console.log(test1.__proto__.__proto__);//ä¹Ÿå°±æ˜¯test.prototype.__proto__,ä¹Ÿæ˜¯Object.prototype
console.log(test1.__proto__.__proto__.__proto__);//null
```

è¿™é‡Œæ²¡æ‰“ç®—è´´åŸå‹é“¾é‚£å¼ å¾ˆå¤æ‚çš„[å›¾ç‰‡](https://www.jianshu.com/p/36c5d3c6972d)





#### è´´å‡ ä¸ªé¢è¯•é¢˜

###### 1.

```javascript
Function.prototype.a = 'a';
Object.prototype.b = 'b';
var test = function(){}
let test1 = new test();
console.log(test1.a);//undefined
console.log(test1.b);//b
```



###### 2.å®ç°ä¸ªç®€é™‹ç‰ˆinstanceofæ–¹æ³•

```javascript
function instanceOf(data, constructor) {
    if (data.__proto__ === constructor.prototype) {
        return true;
    } else if (data.__proto__ === null) {
        return false;
    }
    return instanceOf(data.__proto__, constructor);
}
console.log({} instanceof Object);//true
console.log(instanceOf({}, Object));//true
console.log([] instanceof Object);//true
console.log(instanceOf([], Object));//true
```

è¿™é‡Œå¯ä»¥çŸ¥é“`[].__proto__.__proto__ === Object.prototype`ï¼Œ`{}.__proto__ === Object.prototype`

ä¹Ÿå°±æ˜¯è¯´instanceofå…¶å®æ²¡åŠæ³•åŒºåˆ†å¯¹è±¡ä¸æ•°ç»„ï¼Œé‚£ä¹ˆæ€ä¹ˆåŒºåˆ†

```javascript
let arr = [];
console.log(Object.prototype.toString.call(arr));//[object Array]
let obj = {};
console.log(Object.prototype.toString.call(obj));//[object Object]
```



###### 3.

```javascript
function Parent() {
            this.a = 1;
            this.b = [1, 2, this.a];
            this.c = { demo: 5 };
            this.show = function () {
                console.log(this.a , this.b , this.c.demo );
            }
        }
function Child() {
    this.a = 2;
    this.change = function () {
        this.b.push(this.a);
        this.a = this.b.length;
        this.c.demo = this.a++;
    }
}
        Child.prototype = new Parent(); 
        var parent = new Parent();
        var child1 = new Child();
        var child2 = new Child();
        child1.a = 11;
        child2.a = 12;
        parent.show();
        child1.show();
        child2.show();
        child1.change();
        child2.change();
        parent.show();
        child1.show();
        child2.show();
```

è§£æï¼š

```javascript
function Parent() {
    this.a = 1;
    this.b = [1, 2, this.a];
    this.c = { demo: 5 };
    this.show = function () {
        console.log(this.a, this.b, this.c.demo);
    }
}
function Child() {
    this.a = 2;
    this.change = function () {
        this.b.push(this.a);
        this.a = this.b.length;
        this.c.demo = this.a++;
    }
}
Child.prototype = new Parent();
/*
Child.prototype = {
   a:1,
   b:[1,2,1],
   c:{
        demo:5
   },  
   show:function(){
        console.log(this.a, this.b, this.c.demo);
   }
}
*/

var parent = new Parent();
/*
parent = {
   a:1,
   b:[1,2,1],
   c:{
        demo:5
   },  
   show:function(){
        console.log(this.a, this.b, this.c.demo);
   }
}
*/

var child1 = new Child();
//child1.__ptoto__ === Child.prototype
/*
child1 = {
   a:2,
   change:function(){
        this.b.push(this.a);
        this.a = this.b.length;
        this.c.demo = this.a++;
   }
}
*/

var child2 = new Child();
//child2.__ptoto__ === Child.prototype
/*
child2 = {
   a:2,
   change:function(){
        this.b.push(this.a);
        this.a = this.b.length;
        this.c.demo = this.a++;
   }
}
*/

child1.a = 11;
/*
child1 = {
   a:11,
   change:function(){
        this.b.push(this.a);
        this.a = this.b.length;
        this.c.demo = this.a++;
   }
}
*/

child2.a = 12;
/*
child2 = {
   a:12,
   change:function(){
        this.b.push(this.a);
        this.a = this.b.length;
        this.c.demo = this.a++;
   }
}
*/

parent.show();//1,[1,2,1],5
child1.show();//11,[1,2,1],5
//æ²¡æœ‰showæ–¹æ³•ï¼Œaï¼Œbï¼Œcæ²¡æœ‰å°±éƒ½ä»child1.__proto__ä¸Šæ‰¾ï¼Œä¹Ÿå°±æ˜¯Child.prototypeï¼ŒthisæŒ‡å‘child1ï¼Œ

child2.show();//12,[1,2,1],5
//åŒä¸Š

child1.change();
//æ²¡æœ‰çš„å±æ€§å°±ä»child1.__proto__ä¸Šæ‰¾ï¼ŒthisæŒ‡å‘child1
/*
child1 = {
   a:5,
   change:function(){
        this.b.push(this.a);
        this.a = this.b.length;
        this.c.demo = this.a++;
   }
}
Child.prototype = {
   a:1,
   b:[1,2,1,11],
   c:{
        demo:4
   },  
   show:function(){
        console.log(this.a, this.b, this.c.demo);
   }
}
*/

child2.change();
//æ²¡æœ‰çš„å±æ€§å°±ä»child2.__proto__ä¸Šæ‰¾ï¼ŒthisæŒ‡å‘child2
/*
child2 = {
   a:6,
   change:function(){
        this.b.push(this.a);
        this.a = this.b.length;
        this.c.demo = this.a++;
   }
}
Child.prototype = {
   a:1,
   b:[1,2,1,11,12],
   c:{
        demo:5
   },  
   show:function(){
        console.log(this.a, this.b, this.c.demo);
   }
}
*/

parent.show();//1,[1,2,1],5

child1.show();//5,[1,2,1,11,12],5
child2.show();//6,[1,2,1,11,12],5

//æ‰“å°é¡ºåº
//1,[1,2,1],5
//11,[1,2,1],5
//12,[1,2,1],5
//1,[1,2,1],5
//5,[1,2,1,11,12],5
//6,[1,2,1,11,12],5
```









#### æ€»ç»“

1.å‡½æ•°åœ¨åˆ›å»ºçš„æ—¶å€™ï¼Œä¼šåŒæ—¶åˆ›å»ºprototypeå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¼šè‡ªåŠ¨è·å¾—constructorå±æ€§ã€‚

2.æ„é€ å‡½æ•°çš„å®ä¾‹çš„[[Prototype]]ä¼šæŒ‡å‘æ„é€ å‡½æ•°çš„prototypeå±æ€§ï¼Œå®ƒä»¬ä¼ é€’çš„æ˜¯å¼•ç”¨ï¼Œè€Œä¸æ˜¯å‰¯æœ¬ã€‚

3.å¦‚æœéœ€è¦å–ä¸åˆ°å¯¹è±¡ä¸Šçš„å±æ€§å’Œæ–¹æ³•ï¼Œå°±ä¼šå¾€åŸå‹é“¾ä¸Šæ‰¾ã€‚

4.åŸå‹é“¾çš„é¡¶éƒ¨æ˜¯nullã€‚

