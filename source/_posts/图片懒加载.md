---
title: å›¾ç‰‡æ‡’åŠ è½½
tags: 
- æ·±å…¥å­¦ä¹ 
categories: 
- æ·±å…¥å­¦ä¹ 
---

# å›¾ç‰‡æ‡’åŠ è½½

å›¾ç‰‡ä¼˜åŒ–ï¼š

1ï¼‰å‹ç¼©æˆ–è€…å‰ªè£

2ï¼‰å‡å°‘httpè¯·æ±‚ï¼šä½¿ç”¨é›ªç¢§å›¾

3ï¼‰ä½¿ç”¨å­—ä½“å›¾æ ‡

4ï¼‰å›¾ç‰‡æ‡’åŠ è½½

åªæœ‰ä¸Šé¢è¿™å››ç§æ–¹æ³•å—ï¼Œå½“ç„¶ä¸æ˜¯ï¼Œæˆ‘åªäº†è§£è¿™å››ç§å“ˆå“ˆå“ˆå“ˆå“ˆğŸ¤£



#### å›¾ç‰‡æ‡’åŠ è½½

##### 1ï¼‰ä¸ºä»€ä¹ˆéœ€è¦æ‡’åŠ è½½

æœ‰çš„é¡µé¢ä¼šæœ‰éå¸¸éå¸¸å¤šçš„å›¾ç‰‡ï¼Œä¸€è¿›å…¥é¡µé¢ï¼Œå°±å»åŠ è½½å…¨éƒ¨çš„å›¾ç‰‡ï¼Œä¼šè®©åŠ è½½è¿‡ç¨‹å˜çš„æ¼«é•¿ã€‚è€Œä¸”ä¸€æ¬¡å‘é€é‚£ä¹ˆå¤šè¯·æ±‚ä¹Ÿä¼šå¢åŠ æœåŠ¡å™¨å‹åŠ›ï¼Œå¹¶ä¸”æˆ‘æ‰“å¼€ä¸€ä¸ªé¡µé¢ï¼Œå¯èƒ½æˆ‘åªä¼šæµè§ˆéƒ¨åˆ†å†…å®¹ï¼Œæœ‰äº›æ²¡æµè§ˆåˆ°çš„åœ°æ–¹ï¼Œå…¶å®æˆ‘æ˜¯ä¸éœ€è¦åŠ è½½å‡ºæ¥çš„ï¼Œæˆ‘ä»¬åªéœ€è¦åŠ è½½éœ€è¦çš„èµ„æºï¼Œæ˜¾ç„¶è¿™æ ·å­æ˜¯ä¸åˆç†çš„ã€‚



##### 2ï¼‰å®ç°æ€è·¯

1.æˆ‘ä»¬ç»™å›¾ç‰‡çš„srcæŒ‡å‘ä¸€ä¸ªå°å›¾ç‰‡ï¼Œå¹¶ä¸”è®¾ç½®è‡ªå®šä¹‰å±æ€§data-srcæŒ‡å‘å›¾ç‰‡çœŸå®çš„åœ°å€

2.å½“å›¾ç‰‡è¿›å…¥å¯è§†åŒºåŸŸçš„æ—¶å€™ï¼Œå°†srcæ›¿æ¢æˆdata-srcçš„åœ°å€



##### 3ï¼‰å…·ä½“å®ç°

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<style>
    img {
        width: 300px;
        height: 400px;
    }
</style>

<body>

    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
</body>
<script>
    window.onload = function () {
        const clientHeight = document.documentElement.clientHeight;
        var imgList = document.querySelectorAll('.img');
        var len = imgList.length;
        window.onscroll = function () {
            lazyLoad();
        }
        function lazyLoad() {
            for (var i = 0; i < len; i++) {
                if ((imgList[i].offsetTop - document.documentElement.scrollTop) < clientHeight) {
                    imgList[i].src = imgList[i].dataset.src;
                }
            }
        }
        lazyLoad();
    }
</script>

</html>
```



![](http://www.qinhanwen.xyz/WX20181226-214046@2x.png)

å¯ä»¥çœ‹åˆ°ï¼Œè¿›å…¥è§†å›¾çš„ä¸¤å¼ å›¾ç‰‡srcå·²ç»æ›¿æ¢æˆçœŸæ­£çš„å›¾ç‰‡åœ°å€äº†ï¼Œè€Œä¸‹é¢æœªè¿›å…¥è§†å›¾çš„ï¼Œè¿˜æ˜¯é»˜è®¤å›¾ç‰‡åœ°å€ã€‚



##### 4ï¼‰å°±è¿™æ ·ç»“æŸäº†å—ï¼Œå½“ç„¶ä¸æ˜¯

é’ˆå¯¹äºè¿™ç§è§¦å‘é¢‘ç‡æ¯”è¾ƒé«˜çš„ï¼Œæœ€å¥½ä½¿ç”¨é˜²æŠ–ï¼ˆå‡½æ•°é˜²æŠ–ï¼‰å’ŒèŠ‚æµï¼ˆå‡½æ•°èŠ‚æµï¼‰ï¼Œä¹Ÿæ˜¯ä¸ºäº†æ€§èƒ½çš„é—®é¢˜ï¼Œå…¶å®ç»å¸¸æŠŠä¸¤ä¸ªææ··ï¼Œè¿™æ¬¡ä¹Ÿé¡ºä¾¿å¥½å¥½è®°ä½ä»¥ä¸‹ã€‚



é‚£ä¹ˆæ‰‹å†™ä¸€ä¸‹ç®€å•çš„å®ç°ï¼š

##### 1.**é˜²æŠ–ï¼ˆdebounce**ï¼‰ï¼šæ— æ³•è°ƒç”¨è§¦å‘å¤šå°‘æ¬¡ï¼Œéƒ½åœ¨æœ€åä¸€æ¬¡è§¦å‘ä¹‹åå»¶æ—¶ä¸€æ®µæ—¶é—´ä¹‹åæ‰§è¡Œè°ƒç”¨ã€‚

é˜²æŠ–å‡½æ•°ï¼š

```javascript
function debounce(fn,delay){
    var id;
    return function(){
        clearTimeout(id);
        id = setTimeout(function(){
            fn();
        },delay)
    }
}
```



å…·ä½“å®ç°ï¼š

```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<style>
    img {
        width: 300px;
        height: 400px;
    }
</style>

<body>

    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
</body>
<script>
    window.onload = function () {
        const clientHeight = document.documentElement.clientHeight;
        var imgList = document.querySelectorAll('.img');
        var len = imgList.length;
        window.onscroll = function () {
            loadImg();
        }
        function lazyLoad() {
            for (var i = 0; i < len; i++) {
                if ((imgList[i].offsetTop - document.documentElement.scrollTop) < clientHeight) {
                    imgList[i].src = imgList[i].dataset.src;
                }
            }
        }
        function debounce(fn, delay) {
            var id;
            return function () {
                clearTimeout(id);
                id = setTimeout(function () {
                    fn();
                }, delay)
            }
        }
        var loadImg = debounce(lazyLoad, 5000);
        lazyLoad();
    }
</script>

</html>
```

æˆ‘è¿™é‡Œè®¾ç½®äº†5ç§’æ˜¯ä¸ºäº†çœ‹æ•ˆæœã€‚ã€‚å®é™…å†™çš„æ—¶å€™ï¼Œè§¦å‘é—´éš™ä¼°è®¡ä¹Ÿä¼šå†™çš„å¾ˆå°ï¼Œæˆ‘æ˜¯è§‰å¾—ç”¨é˜²æŠ–æˆ–è€…èŠ‚æµéƒ½å¯ä»¥ï¼Œå¯æ˜¯ç½‘ä¸Šè¯´è¿™ç§åŠ è½½æœ€å¥½ä½¿ç”¨èŠ‚æµï¼Œé‚£å°±çœ‹çœ‹èŠ‚æµå§



##### 2.èŠ‚æµï¼ˆthrottleï¼‰ï¼šä¸ç®¡äº‹ä»¶è§¦å‘æœ‰å¤šé¢‘ç¹ï¼Œéƒ½ä¼šä¿è¯åœ¨è§„å®šæ—¶é—´å†…ä¸€å®šä¼šæ‰§è¡Œä¸€æ¬¡çœŸæ­£çš„äº‹ä»¶å¤„ç†å‡½æ•°

èŠ‚æµå‡½æ•°ï¼š

å‡­è‡ªå·±çš„æ„Ÿè§‰å†™ï¼šæƒ³æ³•æ˜¯ä¸€å¼€å§‹è®°å½•ä¸€ä¸‹æ—¶é—´dateï¼Œç„¶åé¢‘ç¹è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œå¦‚æœå½“å‰æ—¶é—´å‡ä¸Šæ¬¡è®°å½•çš„æ—¶é—´å°äºå»¶æ—¶çš„æ—¶é—´ï¼Œå°±ä¸æ‰§è¡Œã€‚å¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œå°±æ‰§è¡Œï¼Œå¹¶ä¸”è®°å½•æœ€åæ‰§è¡Œçš„æ—¶é—´ã€‚

```javascript
function throttle(fn,delay){
    var date = +new Date();
    return function(){
        if(+new Date() - date >delay){
            date = +new Date();
            fn();
        }
    }
}
```



```html
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<style>
    img {
        width: 300px;
        height: 400px;
    }
</style>

<body>

    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
    <img class="img" src="./WX20181226-213426@2x.png" data-src="https://t12.baidu.com/it/u=457029110,106075125&fm=76" />
</body>
<script>
    window.onload = function () {
        const clientHeight = document.documentElement.clientHeight;
        var imgList = document.querySelectorAll('.img');
        var len = imgList.length;
        window.onscroll = function () {
            loadImg();
        }
        function lazyLoad() {
            for (var i = 0; i < len; i++) {
                if ((imgList[i].offsetTop - document.documentElement.scrollTop) < clientHeight) {
                    imgList[i].src = imgList[i].dataset.src;
                }
            }
        }

        function throttle(fn, delay) {
            var date = +new Date();
            return function () {
                if (+new Date() - date > delay) {
                    date = +new Date();
                    fn();
                }
            }
        }
        var loadImg = throttle(lazyLoad, 5000);
        lazyLoad();
    }
</script>

</html>
```



##### æ€»ç»“

æœ‰ä¸ªæ„Ÿè§‰å¾ˆå¥½ç†è§£çš„è¯æ¥æè¿°é˜²æŠ–ä¸èŠ‚æµ

é˜²æŠ–ï¼šåƒå…¬äº¤è½¦ï¼Œæœ€åä¸€ä¸ªäººä¸Šè½¦äº†ï¼Œå¹¶ä¸”æ²¡æœ‰äººä¸Šè½¦ï¼Œæ‰å¯ä»¥å‘è½¦

èŠ‚æµï¼šåƒå…¬äº¤è½¦ï¼Œèµ·ç‚¹ç«™ä½ èƒ½ä¸‹è½¦ï¼Œä¹‹åæ¯”å¦‚10åˆ†é’Ÿåˆ°ä¸€ä¸ªç«™ï¼Œåˆ°ç«™æ‰èƒ½ä¸‹ï¼Œ10åˆ†é’Ÿä¹‹å†…éƒ½æ˜¯ä¸å…è®¸ä¸‹è½¦ã€‚









